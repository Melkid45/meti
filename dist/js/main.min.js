function onEntry(t){t.forEach((t=>{t.isIntersecting&&t.target.classList.add("element-show")}))}ScrollTrigger.normalizeScroll(!0),gsap.ticker.lagSmoothing(0),ScrollTrigger.config({limitCallbacks:!0,autoAdjustLag:!0});let options={threshold:[.5]},observer=new IntersectionObserver(onEntry,options),elements=document.querySelectorAll(".element-animation");for(let t of elements)observer.observe(t);if($(window).width()>750){let e=0;window.addEventListener("scroll",(function(){let t=window.pageYOffset||document.documentElement.scrollTop;t>e?document.querySelector(".header").classList.add("back"):document.querySelector(".header").classList.remove("back"),e=t<=0?0:t}))}$(".burger").on("click",(function(t){$(".header__mobile").toggleClass("show"),$(this).find(".current").toggleClass("show")})),$(".header__mobile-menu ul li").on("click",(function(t){$(".header__mobile").removeClass("show"),$(this).find(".current").removeClass("show")}));let width=$(window).width();width<=750?($(".header__body-menu").remove(),$(".about-p1").remove(),$(".difference").text("уровня сетевых"),$(".difference2").text("рекламных"),$(".brand").attr("placeholder","Имя бренда")):($(".burger").remove(),$(".about-p2").remove(),$(".difference").text("уровня"),$(".difference2").text("сетевых рекламных"),$(".header__mobile").remove(),$(".muteor").remove());const canvas=document.getElementById("pixelCanvas"),ctx=canvas.getContext("2d"),img=new Image;img.src="../images/dist/about.webp";const ABOUTCONFIG={animCanvas:-250,StartAnim:"top top",StartAnimPixel:"top top",endAnim:"+=30%"};function initCanvas(){canvas.width=img.width,canvas.height=img.height,renderPixelated(20)}function renderPixelated(t){ctx.imageSmoothingEnabled=!1,ctx.clearRect(0,0,canvas.width,canvas.height);const e=Math.floor(canvas.width/t),o=Math.floor(canvas.height/t);ctx.drawImage(img,0,0,e,o),ctx.drawImage(canvas,0,0,e,o,0,0,canvas.width,canvas.height)}if(width<=750&&(ABOUTCONFIG.animCanvas=-50,ABOUTCONFIG.StartAnim="top center",ABOUTCONFIG.StartAnimPixel="+=10%",ABOUTCONFIG.endAnim="+=30%"),img.onload=function(){initCanvas(),window.addEventListener("resize",initCanvas),gsap.to(canvas,{y:ABOUTCONFIG.animCanvas,scrollTrigger:{trigger:".about",start:ABOUTCONFIG.StartAnim,end:"bottom center",scrub:2,ease:"sine.inOut"}});const t={pixelSize:20};gsap.to(t,{scrollTrigger:{trigger:".about",start:ABOUTCONFIG.StartAnimPixel,end:ABOUTCONFIG.endAnim,scrub:1,ease:"sine.inOut"},pixelSize:1,onUpdate:function(){renderPixelated(t.pixelSize)}})},document.addEventListener("DOMContentLoaded",(()=>{const t={squareSize:40,fillColor:"#000000",initialFillRatio:.3,animationDuration:50,staggerDelay:2};width<=750&&(t.squareSize=20);const e=document.querySelector(".feedback_btn"),o=e.querySelector(".btn_canvas"),i=o.getContext("2d");let n=[],s=!1;function a(){const i=e.offsetWidth,s=e.offsetHeight;o.width=i,o.height=s;const a=t.squareSize*parseFloat(getComputedStyle(document.documentElement).fontSize);const l=Math.ceil(i/a),c=Math.ceil(s/a);n=[];for(let e=0;e<c;e++)for(let o=0;o<l;o++)n.push({x:o*a,y:e*a,width:a,height:a,filled:Math.random()<t.initialFillRatio,initialFilled:!1,progress:0});n.forEach((t=>{t.initialFilled=t.filled})),r()}function r(){i.clearRect(0,0,o.width,o.height),n.forEach((e=>{(e.filled||e.progress>0)&&(i.fillStyle=t.fillColor,i.globalAlpha=e.filled?1:e.progress,i.fillRect(e.x,e.y,e.width,e.height),i.globalAlpha=1)}))}async function l(e,o,i){return new Promise((n=>{setTimeout((()=>{const i=performance.now();requestAnimationFrame((function s(a){const l=a-i,c=Math.min(l/t.animationDuration,1);e.progress=o?c:1-c,r(),c<1?requestAnimationFrame(s):(e.filled=o,e.progress=0,n())}))}),i)}))}a(),e.addEventListener("mouseenter",(async function(){s=!0;const e=[...n].sort((()=>Math.random()-.5));for(let o=0;o<e.length&&s;o++){const i=e[o];i.filled||await l(i,!0,o*t.staggerDelay)}})),e.addEventListener("mouseleave",(async function(){s=!1;const e=[...n].sort((()=>Math.random()-.5));for(let o=0;o<e.length&&!s;o++){const i=e[o];i.filled&&!i.initialFilled&&await l(i,!1,o*t.staggerDelay)}})),window.addEventListener("resize",a)})),width>750?$((function(){var t=new ScrollMagic.Controller,e=new TimelineMax({smoothChildTiming:!0}).fromTo(".item1",1.5,{y:"0%"},{top:"-110%",opacity:1,ease:Power2.easeOut},0).fromTo(".item2",1.5,{y:"0%"},{top:"-110%",opacity:1,ease:Power2.easeOut},.3).fromTo(".item3",1.5,{y:"0%"},{top:"-110%",opacity:1,ease:Power2.easeOut},.6).fromTo(".item4",1.5,{y:"0%"},{top:"-110%",opacity:1,ease:Power2.easeOut},.9).fromTo(".item5",1.5,{y:"0%"},{top:"-110%",opacity:1,ease:Power2.easeOut},1.2).fromTo(".item6",1.5,{y:"0%"},{top:"-110%",opacity:1,ease:Power2.easeOut},1.5);new ScrollMagic.Scene({triggerElement:".case",triggerHook:"onLeave",duration:"700%"}).setPin(".case").setTween(e).addTo(t)})):$((function(){var t=new ScrollMagic.Controller,e=new TimelineMax({smoothChildTiming:!0}).fromTo(".case__soft",1.5,{y:"105%"},{y:"-450%",opacity:1,ease:Power2.easeOut},0);new ScrollMagic.Scene({triggerElement:".case",triggerHook:"onLeave",duration:"700%"}).setPin(".case").setTween(e).addTo(t)})),width>750){gsap.set(".cursor",{xPercent:-50,yPercent:-50}),$(document).mousemove((function(t){gsap.to(".cursor",{x:t.clientX,y:t.clientY,duration:.1,ease:"power1.out"})})),$(document).on("mouseenter","a",(function(){console.log($(this).attr("href"));let t=$(this).attr("href");$(".default_text").fadeIn(200),t.includes("tel")?($(".default_text").text("Позвонить"),$(".cursor .phone").css({scale:"1"}),$(".cursor svg").not(".cursor .arrow").css({scale:0})):t.includes("mail")?($(".cursor .mail").css({scale:"1"}),$(".cursor svg").not(".cursor .arrow").css({scale:0}),$(".default_text").text("Написать")):($(".default_text").text("Клик"),$(".cursor .arrow").css({scale:"1"}),$(".cursor svg").not(".cursor .arrow").css({scale:0}))})).on("mouseleave","a",(function(){$(".cursor svg").css({scale:"0"}),$(".default_text").fadeOut(200)})),$(document).on({mouseleave:function(){$(".cursor svg").css("scale","0"),$(".default_text").fadeOut(200)},mousemove:function(){updateVideoCursor()},click:function(t){t.preventDefault(),toggleVideoPlayback()}},".showreel");const o=document.querySelector(".showreel__video");function toggleVideoPlayback(){o&&(o.paused||o.ended?o.play().catch((t=>console.error("Video play error:",t))):o.pause(),updateVideoCursor())}function updateVideoCursor(){if(!o)return;const t=!o.paused&&!o.ended,e=$(".cursor");e.find(".pause").css("scale",t?"1":"0"),e.find(".play").css("scale",t?"0":"1"),$(".default_text").fadeIn(200),$(".default_text").text(t?"Пауза":"воспроизвести")}}$(".muteor").on("click",(function(t){const e=document.querySelector(".showreel__video");e.muted?(e.muted=!1,$(".mute").fadeIn(300),$(".sound").fadeOut(300)):(e.muted=!0,$(".mute").fadeOut(300),$(".sound").fadeIn(300))}));class SectionGrid{constructor(t){this.section=t,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.cellPool=[],this.mouse={x:-1e3,y:-1e3},this.rafId=null,this.isActive=!0,this.sectionTop=0,this.settings={baseSize:54,sizeVariation:0,spacing:0,activationRadius:120,fadeSpeed:.01,maxRotation:0,rotationSpeed:0,borderColor:{r:244,g:244,b:244,a:.24},fillColor:{r:0,g:0,b:0,a:0},borderWidth:1,offsetX:0,offsetY:0},t.classList.contains("services")&&(this.settings.offsetX=-1,this.settings.offsetY=-25),t.classList.contains("client")&&(this.settings.offsetX=0,this.settings.offsetY=11),t.classList.contains("main")&&(this.settings.offsetX=27,this.settings.offsetY=-27),t.classList.contains("feedback")&&(this.settings.offsetX=27,this.settings.offsetY=-24),this.init()}remToPx(t){return t*(window.innerWidth/1920)}init(){this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.pointerEvents="none",this.canvas.style.zIndex="1",this.canvas.style.imageRendering="pixelated",this.section.style.position="relative",this.section.appendChild(this.canvas),this.updateSectionPosition(),this.resize(),this.initPool(),this.startAnimation()}updateSectionPosition(){this.rect=this.section.getBoundingClientRect(),this.sectionTop=this.rect.top+window.scrollY}resize(){this.rect=this.section.getBoundingClientRect();const t=window.devicePixelRatio||1;this.canvas.style.width=this.rect.width+"px",this.canvas.style.height=this.rect.height+"px",this.canvas.width=this.rect.width*t,this.canvas.height=this.rect.height*t,this.ctx.scale(t,t);const e=this.remToPx(this.settings.baseSize);this.remToPx(this.settings.spacing);this.gridCols=Math.ceil(this.rect.width/e),this.gridRows=Math.ceil(this.rect.height/e)}initPool(){this.cellPool=[];const t=this.remToPx(this.settings.baseSize),e=this.remToPx(this.settings.offsetX),o=this.remToPx(this.settings.offsetY),i=(this.rect.width-this.gridCols*t)/2+e,n=(this.rect.height-this.gridRows*t)/2+o;for(let e=0;e<this.gridRows;e++)for(let o=0;o<this.gridCols;o++)this.cellPool.push({x:i+o*t,y:n+e*t,width:t,height:t,rotation:0,targetRotation:0,alpha:0,active:!1,lastActiveTime:0,borderWidth:Math.floor(this.remToPx(this.settings.borderWidth))})}updateMousePosition(t,e){const o=this.section.getBoundingClientRect();this.mouse.x=t-o.left,this.mouse.y=e-o.top}updateCells(){const t=this.remToPx(this.settings.activationRadius),e=t*t,o=performance.now();for(let t of this.cellPool){const i=this.mouse.x-(t.x+t.width/2),n=this.mouse.y-(t.y+t.height/2),s=i*i+n*n;s<e?(t.active=!0,t.lastActiveTime=o,t.targetRotation=Math.atan2(n,i)+Math.PI/2,t.alpha=Math.min(1,1-s/e)):(t.active&&o-t.lastActiveTime>300&&(t.active=!1),t.alpha=Math.max(0,t.alpha-this.settings.fadeSpeed),t.targetRotation=0),t.rotation+=(t.targetRotation-t.rotation)*this.settings.rotationSpeed}}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.imageSmoothingEnabled=!1,this.ctx.fillStyle=`rgba(${this.settings.fillColor.r}, ${this.settings.fillColor.g}, ${this.settings.fillColor.b}, ${this.settings.fillColor.a})`,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);for(let t of this.cellPool){if(t.alpha<=0)continue;const e=Math.floor(t.x),o=Math.floor(t.y),i=t.width;this.ctx.save(),this.ctx.translate(e+i/2,o+i/2),this.ctx.rotate(t.rotation),this.ctx.fillStyle=`rgba(\n        ${this.settings.fillColor.r}, \n        ${this.settings.fillColor.g}, \n        ${this.settings.fillColor.b}, \n        ${this.settings.fillColor.a*t.alpha}\n      )`,this.ctx.fillRect(-i/2,-i/2,i,i),this.ctx.strokeStyle=`rgba(\n        ${this.settings.borderColor.r}, \n        ${this.settings.borderColor.g}, \n        ${this.settings.borderColor.b}, \n        ${this.settings.borderColor.a*t.alpha}\n      )`,this.ctx.lineWidth=t.borderWidth,this.ctx.strokeRect(-i/2,-i/2,i,i),this.ctx.restore()}}startAnimation(){this.rafId||this.animate()}animate(){this.updateCells(),this.draw(),this.rafId=requestAnimationFrame((()=>this.animate()))}}class GridSystem{constructor(){this.sectionGrids=[],this.mouse={x:-1e3,y:-1e3},this.scrollY=window.scrollY,this.lastScrollY=window.scrollY,this.init()}init(){document.querySelectorAll('[data-grid="true"]').forEach((t=>{this.sectionGrids.push(new SectionGrid(t))})),document.addEventListener("mousemove",(t=>{this.mouse.x=t.clientX,this.mouse.y=t.clientY,this.sectionGrids.forEach((e=>{const o=e.section.getBoundingClientRect();o.top<window.innerHeight&&o.bottom>0&&e.updateMousePosition(t.clientX,t.clientY)}))})),document.addEventListener("mouseout",(()=>{this.mouse.x=-1e3,this.mouse.y=-1e3})),window.addEventListener("scroll",(()=>{this.lastScrollY=this.scrollY,this.scrollY=window.scrollY,this.sectionGrids.forEach((t=>{t.updateSectionPosition()}))}),{passive:!0}),window.addEventListener("resize",(()=>{this.sectionGrids.forEach((t=>{t.resize(),t.updateSectionPosition()}))}))}}width>750&&document.addEventListener("DOMContentLoaded",(()=>{new GridSystem})),document.addEventListener("DOMContentLoaded",(()=>{const t={squareSize:54,gap:0,fillColor:"#442CBF",bgColor:"#000000",animationDuration:1e3,widthView:1920};function e(e){return e*(window.innerWidth/t.widthView)}width<=750&&(t.widthView=375,t.squareSize=20);const o=document.getElementById("feedback-grid-canvas"),i=o.getContext("2d");let n=[],s=[],a=0;function r(){const r=document.querySelector(".feedback__top"),c=r.clientWidth,h=r.clientHeight,d=window.devicePixelRatio||1;o.style.width=c+"px",o.style.height=h+"px",o.width=Math.floor(c*d),o.height=Math.floor(h*d),i.scale(d,d);const u=Math.floor(e(t.squareSize)),f=Math.floor(e(t.gap)),g=Math.ceil(c/(u+f))+1,m=Math.ceil(h/(u+f))+1,p=g*(u+f),w=m*(u+f),y=Math.floor((c-p)/2),v=Math.floor((h-w)/2);n=[];for(let t=-1;t<m;t++)for(let e=-1;e<g;e++)n.push({x:e*(u+f)+y,y:t*(u+f)+v,width:u,height:u,filled:!1});s=[...Array(n.length).keys()],function(t){for(let e=t.length-1;e>0;e--){const o=Math.floor(Math.random()*(e+1));[t[e],t[o]]=[t[o],t[e]]}}(s),a=0,l()}function l(){i.clearRect(0,0,o.width,o.height),i.imageSmoothingEnabled=!1,i.fillStyle=t.bgColor,i.fillRect(0,0,o.width,o.height),n.forEach((e=>{const o=Math.floor(e.x),n=Math.floor(e.y),s=Math.floor(e.width);i.fillStyle=e.filled?t.fillColor:t.bgColor,i.fillRect(o,n,s,s)}))}const c=new ScrollMagic.Controller;let h;new ScrollMagic.Scene({triggerElement:".feedback",duration:t.animationDuration,triggerHook:1}).on("progress",(t=>{!function(t){if(t<a)for(let e=a-1;e>=t;e--)e>=0&&e<s.length&&(n[s[e]].filled=!1);else for(let e=a;e<t;e++)e>=0&&e<s.length&&(n[s[e]].filled=!0);a=t,l()}(Math.floor(t.progress*n.length))})).addTo(c),r(),window.addEventListener("resize",(()=>{clearTimeout(h),h=setTimeout((()=>{r(),c.update()}),100)}))})),document.addEventListener("DOMContentLoaded",(()=>{const t={squareSize:54,gap:0,fillColor:"#000000",bgColor:"#F4F4F403",animationDuration:2e3,widthView:1920};function e(e){return e*(window.innerWidth/t.widthView)}width<=750&&(t.widthView=375,t.squareSize=20);const o=document.getElementById("grid-canvas-begin"),i=o.getContext("2d");let n=[],s=[],a=0;function r(){const r=document.querySelector(".main"),c=r.clientWidth,h=r.clientHeight,d=window.devicePixelRatio||1;o.style.width=c+"px",o.style.height=h+"px",o.width=Math.floor(c*d),o.height=Math.floor(h*d),i.scale(d,d);const u=Math.floor(e(t.squareSize)),f=Math.floor(e(t.gap)),g=Math.ceil(c/(u+f))+1,m=Math.ceil(h/(u+f))+1,p=g*(u+f),w=m*(u+f),y=Math.floor((c-p)/2),v=Math.floor((h-w)/2);n=[];for(let t=-1;t<m;t++)for(let e=-1;e<g;e++)n.push({x:e*(u+f)+y,y:t*(u+f)+v,width:u,height:u,filled:!1});s=[...Array(n.length).keys()],function(t){for(let e=t.length-1;e>0;e--){const o=Math.floor(Math.random()*(e+1));[t[e],t[o]]=[t[o],t[e]]}}(s),a=0,l()}function l(){i.clearRect(0,0,o.width,o.height),i.imageSmoothingEnabled=!1,i.fillStyle=t.bgColor,i.fillRect(0,0,o.width,o.height),n.forEach((e=>{const o=Math.floor(e.x),n=Math.floor(e.y),s=Math.floor(e.width);i.fillStyle=e.filled?t.fillColor:t.bgColor,i.fillRect(o,n,s,s)}))}const c=new ScrollMagic.Controller;let h;new ScrollMagic.Scene({triggerElement:".main",duration:t.animationDuration,triggerHook:0}).setPin(".main").on("progress",(t=>{!function(t){if(t<a)for(let e=a-1;e>=t;e--)e>=0&&e<s.length&&(n[s[e]].filled=!1);else for(let e=a;e<t;e++)e>=0&&e<s.length&&(n[s[e]].filled=!0);a=t,l()}(Math.floor(t.progress*n.length))})).addTo(c),r(),window.addEventListener("resize",(()=>{clearTimeout(h),h=setTimeout((()=>{r(),c.update()}),100)}))})),document.addEventListener("DOMContentLoaded",(()=>{const t={squareSize:54,fillColor:"#442CBF",bgColor:"#000000",animationDelay:500,fillDuration:1500,fadeDuration:2500,logoMoveDuration:1e3,targetLogoPosition:{x:40,y:53},sizeLogo:{width:200,height:50}};width<=750&&(t.squareSize=20,t.targetLogoPosition.x=20,t.targetLogoPosition.y=20,t.sizeLogo.width=120,t.sizeLogo.height=30);const e=document.querySelector(".preload-container"),o=document.querySelector(".preload-canvas"),i=o.getContext("2d"),n=e.querySelector("img"),s=document.querySelector("#js-cursor-progress span"),a=(document.body,document.querySelector(".header__body-logo"));let r,l,c=[],h={x:0,y:0};function d(){o.width=window.innerWidth,o.height=window.innerHeight;const e=Math.ceil(o.width/t.squareSize)+1,i=Math.ceil(o.height/t.squareSize)+1;c=[];for(let o=-1;o<i;o++)for(let i=-1;i<e;i++)c.push({x:i*t.squareSize,y:o*t.squareSize,width:t.squareSize,height:t.squareSize,state:"black",alpha:1});f(),u()}function u(){for(let t=c.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[c[t],c[e]]=[c[e],c[t]]}}function f(){i.clearRect(0,0,o.width,o.height),c.forEach((e=>{"black"===e.state?(i.fillStyle=t.bgColor,i.globalAlpha=e.alpha,i.fillRect(e.x,e.y,e.width,e.height)):"color"===e.state&&(i.fillStyle=t.fillColor,i.globalAlpha=e.alpha,i.fillRect(e.x,e.y,e.width,e.height))})),i.globalAlpha=1}function g(e){l||(l=e);const o=e-l,i=Math.min(o/t.fillDuration,1),n=Math.floor(i*c.length);for(let t=0;t<n;t++)t<c.length&&(c[t].state="color");const a=Math.floor(99*i);s.textContent=`${a.toString().padStart(2,"0")}%`,f(),i<1?r=requestAnimationFrame(g):(l=null,u(),r=requestAnimationFrame(m))}function m(i){l||(l=i),o.style.background="transparent";const d=i-l,u=Math.min(d/t.fadeDuration,1),g=Math.min(d/t.logoMoveDuration,1),p=(w=g,1-Math.pow(1-w,3));var w;const y=h.x+(t.targetLogoPosition.x-h.x)*p,v=h.y+(t.targetLogoPosition.y-h.y)*p;n.style.left=`${y}rem`,n.style.top=`${v}rem`,n.style.width=`${t.sizeLogo.width}rem`,n.style.height=`${t.sizeLogo.height}rem`,setTimeout((()=>{a.style.opacity="1"}),2e3),setTimeout((()=>{$(".main__body .stroke div p").each((function(){$(this).shuffleLetters({step:5,fps:120,text:$(this).text()})}))}),500),setTimeout((()=>{$(".main__body .stroke div").addClass("anim_stroke")}),3500);const x=Math.floor(u*c.length);for(let t=0;t<x;t++)t<c.length&&(c[t].state="transparent",c[t].alpha=1-u);s.parentElement&&(s.parentElement.style.opacity=1-u),f(),u<1?r=requestAnimationFrame(m):(n.style.left=`${t.targetLogoPosition.x}rem`,n.style.top=`${t.targetLogoPosition.y}rem`,e.style.transition="opacity 0.5s ease",e.style.opacity="0",setTimeout((()=>{e.remove()}),500))}d(),function(){const e=(window.innerWidth-n.offsetWidth)/2,o=(window.innerHeight-n.offsetHeight)/2;h={x:e/parseFloat(getComputedStyle(document.documentElement).fontSize),y:o/parseFloat(getComputedStyle(document.documentElement).fontSize)},setTimeout((()=>{l=null,r=requestAnimationFrame(g)}),t.animationDelay)}(),window.addEventListener("resize",(()=>{cancelAnimationFrame(r),d(),f()}))})),function(t){t.fn.shuffleLetters=function(e){var o=t.extend({step:8,fps:25,text:"",callback:function(){}},e);function i(t){for(var e=[],o=0;o<t.childNodes.length;o++){var n=t.childNodes[o];3===n.nodeType?e.push(n):1===n.nodeType&&(e=e.concat(i(n)))}return e}function n(t){var e="";"lowerLetter"==t?e="abcdefghijklmnopqrstuvwxyz0123456789":"upperLetter"==t?e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789":"rusupperLetter"==t?e="АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ":"ruslowerLetter"==t?e="абвгдеёжзийклмнопрстуфхцчшщъыьэюя":"symbol"==t&&(e=",.?/\\(^)![]{}*&^%$#'\"");var o=e.split("");return o[Math.floor(Math.random()*o.length)]}return this.each((function(){var e=t(this);if(e.data("animated"))return!0;e.data("animated",!0);var s=e.html();e.data("originalHtml",s),e.find(".shuffle-wrapper").length||e.html('<span class="shuffle-wrapper">'+s+"</span>");var a=i(e.find(".shuffle-wrapper")[0]),r=[];a.forEach((t=>{for(var e=0;e<t.textContent.length;e++)r.push({node:t,index:e,char:t.textContent[e],type:(o=t.textContent[e]," "===o?"space":/[a-z]/.test(o)?"lowerLetter":/[A-Z]/.test(o)?"upperLetter":/[А-ЯЁ]/.test(o)?"rusupperLetter":/[а-яё]/.test(o)?"ruslowerLetter":"symbol")});var o}));var l=r.reduce(((t,e,o)=>("space"!==e.type&&t.push(o),t)),[]);!function t(i){if(i>l.length)return e.data("animated",!1),e.html(s),void o.callback(e);for(var c=a.map((t=>t.textContent.split(""))),h=Math.max(i,0);h<l.length;h++){var d=r[l[h]];h<i+o.step?c[a.indexOf(d.node)][d.index]=n(d.type):c[a.indexOf(d.node)][d.index]=""}a.forEach(((t,e)=>{t.textContent=c[e].join("")})),setTimeout((function(){t(i+1)}),1e3/o.fps)}(-o.step)}))}}(jQuery),$((function(){const t={heart:[[1,6],[1,5],[1,4],[2,3],[3,2],[4,2],[5,3],[6,4],[7,4],[8,3],[9,2],[10,2],[11,3],[12,4],[12,5],[12,6],[11,7],[10,8],[9,9],[8,10],[7,11],[6,11],[5,10],[4,9],[3,8],[2,7]],sound:[[6,11],[5,10],[4,9],[3,8],[2,8],[1,8],[1,7],[1,6],[1,5],[2,5],[3,5],[4,4],[5,3],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[6,10],[8,9],[9,9],[10,8],[10,7],[10,6],[10,5],[9,4],[8,4],[8,11],[9,11],[10,11],[11,10],[12,9],[12,8],[12,7],[12,6],[12,5],[12,4],[11,3],[10,2],[9,2],[8,2]],glass:[[6,7],[6,6],[7,6],[7,7],[0,6],[0,7],[1,5],[2,4],[3,3],[4,3],[5,2],[6,2],[7,2],[8,2],[9,3],[10,3],[11,4],[12,5],[13,6],[13,7],[12,8],[11,9],[10,10],[9,10],[8,11],[7,11],[6,11],[5,11],[4,10],[3,10],[2,9],[1,8]],cmile:[[1,8],[1,7],[1,6],[1,5],[2,4],[2,3],[3,2],[4,2],[5,1],[6,1],[7,1],[8,1],[9,2],[10,2],[11,3],[11,4],[12,5],[12,6],[12,7],[12,8],[11,9],[11,10],[10,11],[9,11],[8,12],[7,12],[6,12],[5,12],[4,11],[3,11],[2,10],[2,9],[5,6],[5,5],[5,4],[8,6],[8,5],[8,4],[4,8],[5,9],[6,9],[7,9],[8,9],[9,8]],kind:[[8,1],[7,1],[6,1],[5,1],[4,2],[3,2],[2,3],[2,4],[1,5],[1,6],[1,7],[1,8],[2,9],[2,10],[3,11],[4,11],[5,12],[6,12],[7,12],[8,12],[9,11],[10,11],[11,10],[11,9],[12,8],[12,7],[12,6],[12,5],[10,2],[10,3],[11,3],[9,4],[8,5],[7,6],[6,6],[6,7],[7,7],[6,4],[5,4],[4,5],[4,6],[4,7],[4,8],[5,9],[6,9],[7,9],[8,9],[9,8],[9,7]],creative:[[8,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[6,8],[5,7],[5,6],[5,5],[4,5],[6,5],[4,8],[3,7],[3,6],[3,5],[3,4],[2,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[2,10],[3,11],[4,12],[5,12],[6,12],[7,12],[8,11],[9,11],[10,10],[11,9],[11,8],[12,7],[12,6],[12,5],[11,5],[10,6],[9,6],[9,7],[9,5],[9,4],[9,3],[9,2]],camera:[[1,2],[2,2],[3,2],[4,2],[5,2],[6,2],[7,2],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[8,10],[8,11],[7,11],[6,11],[5,11],[4,11],[3,11],[2,11],[1,11],[1,10],[1,9],[1,8],[1,7],[1,6],[1,5],[1,4],[1,3],[9,5],[10,4],[11,3],[12,2],[12,3],[12,4],[12,5],[12,6],[12,7],[12,8],[12,9],[12,10],[12,11],[11,10],[10,9],[9,8]],photo:[[1,3],[2,3],[3,3],[4,3],[5,3],[6,3],[7,3],[8,3],[9,3],[10,3],[11,3],[12,3],[12,4],[12,5],[12,6],[12,7],[12,8],[12,9],[12,10],[12,11],[11,11],[10,11],[9,11],[8,11],[7,11],[6,11],[5,11],[4,11],[3,11],[2,11],[1,11],[1,10],[1,9],[1,8],[1,7],[1,6],[1,5],[1,4],[3,2],[4,2],[8,6],[9,6],[10,7],[10,8],[9,9],[8,9],[7,8],[7,7]],arrow:[[1,12],[1,11],[1,10],[2,9],[3,8],[4,7],[5,6],[6,5],[7,4],[8,3],[9,2],[10,1],[12,1],[11,0],[13,2],[12,3],[11,4],[10,5],[9,6],[8,7],[7,8],[6,9],[5,10],[4,11],[3,12],[2,12],[3,10],[10,3]]},e=document.getElementById("interactive-grid"),o=["#442CBF"];for(let o=0;o<14;o++)for(let i=0;i<14;i++){const n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("x",40*i),n.setAttribute("y",40*o),n.setAttribute("width",40),n.setAttribute("height",40),n.setAttribute("stroke","#272727"),n.setAttribute("fill","transparent"),n.classList.add("cell"),Object.keys(t).forEach((e=>{t[e].some((t=>t[0]===i&&t[1]===o))&&n.setAttribute(`data-${e}`,"true")})),e.appendChild(n)}const i=document.querySelector(".services__body-block-titles"),n=Array.from(i.querySelectorAll("h3")),s=document.querySelector(".services__body-block-desc"),a=Array.from(s.querySelectorAll("p"));n.forEach((t=>{t.dataset.originalHtml=t.innerHTML})),gsap.set(n,{autoAlpha:0}),gsap.set(a,{autoAlpha:0}),gsap.ticker.lagSmoothing(0),ScrollTrigger.normalizeScroll(!0);const r=gsap.timeline({scrollTrigger:{id:"services-scroll",trigger:".services",start:"top -5.5%",end:"+="+3.2*Object.keys(t).length*800,scrub:1,pin:!0,onEnter:()=>r.play(),onLeave:()=>r.pause(),onEnterBack:()=>r.play(),onLeaveBack:()=>r.pause(),fastScrollEnd:!0,preventOverlaps:!0}});let l=-1;const c=document.getElementById("number");Object.keys(t).forEach(((t,e)=>{const i=gsap.utils.toArray(`[data-${t}="true"]`),s=n[e],h=n[e-1],d=a[e],u=a[e-1],f=`scene-${e}`;r.addLabel(f),r.set(i,{fill:"transparent"},f),h&&u&&r.to([h,u],{autoAlpha:0,duration:.2,ease:"power1.inOut"},f),r.call((()=>{c.innerText=(e+1).toString().padStart(2,"0")}),null,`${f}+=0`),r.fromTo(c,{y:-10,autoAlpha:0},{y:0,autoAlpha:1,duration:.4,ease:"power2.out"},f),r.to(d,{autoAlpha:1,duration:.3},">"),r.to(s,{autoAlpha:1,duration:.4,ease:"power2.out",onStart:()=>{l!==e&&(l=e,$(s).shuffleLetters({step:5,fps:45,text:s.textContent}))}},`${f}+=0.4`),r.to(i,{fill:o[0],duration:.6,ease:"power2.out",stagger:{each:.025,from:"edges",grid:[14,14]}},`${f}+=0.5`),r.to(i,{fill:"transparent",duration:.2,ease:"power2.in",stagger:{each:.02,from:"center"}},`${f}+=2.0`),r.addPause(`${f}+=3.2`)}))})),document.addEventListener("DOMContentLoaded",(function(){const t=parseFloat(getComputedStyle(document.documentElement).fontSize),e={squareSize:54,gap:0,fillColor:"rgba(244, 244, 244, 0.03)",bgColor:"#000000",fillDuration:.4,delayDuration:.3,clearDuration:.3};function o(e){return e*t}width<=750&&(e.squareSize=20);const i=document.getElementById("grid-canvas-video"),n=i.getContext("2d"),s=document.querySelector(".showreel");let a=[],r=[],l=0;function c(){const t=Math.floor(s.clientWidth),l=Math.floor(s.clientHeight),c=window.devicePixelRatio||1;i.style.width=t+"px",i.style.height=l+"px",i.width=Math.floor(t*c),i.height=Math.floor(l*c),n.scale(c,c);const d=Math.floor(o(e.squareSize)),u=Math.floor(o(e.gap)),f=Math.ceil(t/(d+u)),g=Math.ceil(l/(d+u)),m=f*(d+u),p=g*(d+u),w=Math.max(0,(t-m)/2),y=Math.max(0,(l-p)/2);a=[];for(let t=0;t<g;t++)for(let e=0;e<f;e++){const o=Math.floor(e*(d+u)+w),i=Math.floor(t*(d+u)+y);a.push({x:o,y:i,width:d,height:d,filled:!1})}r=Array.from({length:a.length},((t,e)=>e));for(let t=r.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[r[t],r[e]]=[r[e],r[t]]}h()}function h(){n.clearRect(0,0,i.width,i.height),n.imageSmoothingEnabled=!1,a.forEach((t=>{const o=Math.floor(t.x),i=Math.floor(t.y),s=Math.floor(t.width),a=Math.floor(t.height);n.fillStyle=t.filled?e.fillColor:e.bgColor,n.fillRect(o,i,s,a)}))}c(),function(){const t=new ScrollMagic.Controller,o=e.fillDuration+e.delayDuration+e.clearDuration;new ScrollMagic.Scene({triggerElement:".showreel",duration:200*o+"%",triggerHook:0}).setPin(".showreel").on("progress",(function(t){!function(t){const o=t>l;l=t;const i=e.fillDuration,n=i+e.delayDuration,s=i+e.delayDuration+e.clearDuration;if(o)if(t<=i){const e=t/i,o=Math.floor(e*a.length);for(let t=0;t<o;t++)a[r[t]].filled=!0}else if(t<=n)a.forEach((t=>t.filled=!0));else{const o=(t-n)/e.clearDuration,i=Math.floor(o*a.length);if(t>=.99*s)a.forEach((t=>t.filled=!1));else for(let t=0;t<i;t++)a[r[a.length-1-t]].filled=!1}else if(t>=n){const o=(t-n)/e.clearDuration,i=a.length-Math.floor(o*a.length);for(let t=0;t<i;t++)a[r[t]].filled=!0}else if(t>=i)a.forEach((t=>t.filled=!0));else{const e=t/i,o=a.length-Math.floor(e*a.length);for(let t=0;t<o;t++)a[r[t]].filled=!1}h()}(t.progress)})).addTo(t)}();const d=new ResizeObserver((t=>{for(let e of t)e.target===s&&c()}));d.observe(s),window.addEventListener("beforeunload",(()=>{d.disconnect()}))}));